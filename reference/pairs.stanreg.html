<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Pairs method for stanreg objects — pairs.stanreg • rstanarm</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Pairs method for stanreg objects — pairs.stanreg" />

<meta property="og:description" content="Interface to bayesplot's mcmc_pairs function 
for use with rstanarm models. Be careful not to specify too
many parameters to include or the plot will be both hard to read and slow to
render." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstanarm</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.17.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../dev-notes/index.html">Develop</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstanarm">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pairs method for stanreg objects</h1>
    
    <div class="hidden name"><code>pairs.stanreg.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Interface to <span class="pkg">bayesplot</span>'s <code><a href='http://www.rdocumentation.org/packages/bayesplot/topics/MCMC-scatterplots'>mcmc_pairs</a></code> function 
for use with <span class="pkg">rstanarm</span> models. Be careful not to specify too
many parameters to include or the plot will be both hard to read and slow to
render.</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for stanreg</span>
<span class='fu'>pairs</span>(<span class='no'>x</span>, <span class='kw'>pars</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>regex_pars</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='fu'>pairs_condition</span>(<span class='kw'>nuts</span> <span class='kw'>=</span> <span class='st'>"accept_stat__"</span>), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A fitted model object returned by one of the 
<span class="pkg">rstanarm</span> modeling functions. See <code><a href='stanreg-objects.html'>stanreg-objects</a></code>.</p></td>
    </tr>
    <tr>
      <th>pars</th>
      <td><p>An optional character vetor of parameter names. All parameters 
are included by default, but for models with more than just a few 
parameters it may be far too many to visualize on a small computer screen 
and also may require substantial computing time.</p></td>
    </tr>
    <tr>
      <th>regex_pars</th>
      <td><p>An optional character vector of regular 
expressions to use for parameter selection. <code>regex_pars</code> can be used
in place of <code>pars</code> or in addition to <code>pars</code>. Currently, all
functions that accept a <code>regex_pars</code> argument ignore it for models fit
using optimization.</p></td>
    </tr>
    <tr>
      <th>condition</th>
      <td><p>Same as the <code>condition</code> argument to 
<code><a href='http://www.rdocumentation.org/packages/bayesplot/topics/MCMC-scatterplots'>mcmc_pairs</a></code> except the <em>default is different</em>
for <span class="pkg">rstanarm</span> models. By default, the <code>mcmc_pairs</code> function in
the <span class="pkg">bayesplot</span> package plots some of the Markov chains (half, in the
case of an even number of chains) in the panels above the diagonal and the
other half in the panels below the diagonal. However since we know that 
<span class="pkg">rstanarm</span> models were fit using Stan (which <span class="pkg">bayesplot</span> doesn't 
assume) we can make the default more useful by splitting the draws 
according to the <code>accept_stat__</code> diagnostic. The plots below the 
diagonal will contain realizations that are below the median 
<code>accept_stat__</code> and the plots above the diagonal will contain 
realizations that are above the median <code>accept_stat__</code>. To change this
behavior see the documentation of the <code>condition</code> argument at 
<code><a href='http://www.rdocumentation.org/packages/bayesplot/topics/MCMC-scatterplots'>mcmc_pairs</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional arguments passed to <code><a href='http://www.rdocumentation.org/packages/bayesplot/topics/MCMC-scatterplots'>mcmc_pairs</a></code>. 
The <code>np</code>, <code>lp</code>, and <code>max_treedepth</code> arguments to 
<code>mcmc_pairs</code> are handled automatically by <span class="pkg">rstanarm</span> and do not 
need to be specified by the user in <code>...</code>. The arguments that can be 
specified in <code>...</code> include <code>transformations</code>, <code>diag_fun</code>,
<code>off_diag_fun</code>, <code>diag_args</code>, <code>off_diag_args</code>,
and <code>np_style</code>. These arguments are
documented thoroughly on the help page for
<code><a href='http://www.rdocumentation.org/packages/bayesplot/topics/MCMC-scatterplots'>mcmc_pairs</a></code>.</p></td>
    </tr>
    </table>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (!<span class='fu'>exists</span>(<span class='st'>"example_model"</span>)) <span class='fu'>example</span>(<span class='no'>example_model</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: no help found for ‘example_model’</span></div><div class='input'>
<span class='kw pkg'>bayesplot</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/bayesplot/topics/bayesplot-colors'>color_scheme_set</a></span>(<span class='st'>"purple"</span>)

<span class='co'># see 'condition' argument above for details on the plots below and </span>
<span class='co'># above the diagonal. default is to split by accept_stat__.</span>
<span class='fu'>pairs</span>(<span class='no'>example_model</span>, <span class='kw'>pars</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"(Intercept)"</span>, <span class='st'>"log-posterior"</span>))</div><div class='output co'>#&gt; <span class='error'>Error in pairs(example_model, pars = c("(Intercept)", "log-posterior")): object 'example_model' not found</span></div><div class='input'>
<span class='fu'>pairs</span>(
  <span class='no'>example_model</span>,
  <span class='kw'>regex_pars</span> <span class='kw'>=</span> <span class='st'>"herd:[2,7,9]"</span>,
  <span class='kw'>diag_fun</span> <span class='kw'>=</span> <span class='st'>"dens"</span>,
  <span class='kw'>off_diag_fun</span> <span class='kw'>=</span> <span class='st'>"hex"</span>
)</div><div class='output co'>#&gt; <span class='error'>Error in pairs(example_model, regex_pars = "herd:[2,7,9]", diag_fun = "dens",     off_diag_fun = "hex"): object 'example_model' not found</span></div><div class='input'>
</div><div class='input'><span class='co'># for demonstration purposes, intentionally fit a model that</span>
<span class='co'># will (almost certainly) have some divergences</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_glm.html'>stan_glm</a></span>(
  <span class='no'>mpg</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>,
  <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='co'># this combo of prior and adapt_delta should lead to some divergences</span>
  <span class='kw'>prior</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>hs</a></span>(),
  <span class='kw'>adapt_delta</span> <span class='kw'>=</span> <span class='fl'>0.9</span>
)</div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 1).
#&gt; 
#&gt; Gradient evaluation took 6.3e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.63 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:   1 / 1000 [  0%]  (Warmup)
#&gt; Iteration: 100 / 1000 [ 10%]  (Warmup)
#&gt; Iteration: 200 / 1000 [ 20%]  (Warmup)
#&gt; Iteration: 300 / 1000 [ 30%]  (Warmup)
#&gt; Iteration: 400 / 1000 [ 40%]  (Warmup)
#&gt; Iteration: 500 / 1000 [ 50%]  (Warmup)
#&gt; Iteration: 501 / 1000 [ 50%]  (Sampling)
#&gt; Iteration: 600 / 1000 [ 60%]  (Sampling)
#&gt; Iteration: 700 / 1000 [ 70%]  (Sampling)
#&gt; Iteration: 800 / 1000 [ 80%]  (Sampling)
#&gt; Iteration: 900 / 1000 [ 90%]  (Sampling)
#&gt; Iteration: 1000 / 1000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 1.28927 seconds (Warm-up)
#&gt;                0.897129 seconds (Sampling)
#&gt;                2.1864 seconds (Total)
#&gt; 
#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 2).
#&gt; 
#&gt; Gradient evaluation took 3.7e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.37 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:   1 / 1000 [  0%]  (Warmup)
#&gt; Iteration: 100 / 1000 [ 10%]  (Warmup)
#&gt; Iteration: 200 / 1000 [ 20%]  (Warmup)
#&gt; Iteration: 300 / 1000 [ 30%]  (Warmup)
#&gt; Iteration: 400 / 1000 [ 40%]  (Warmup)
#&gt; Iteration: 500 / 1000 [ 50%]  (Warmup)
#&gt; Iteration: 501 / 1000 [ 50%]  (Sampling)
#&gt; Iteration: 600 / 1000 [ 60%]  (Sampling)
#&gt; Iteration: 700 / 1000 [ 70%]  (Sampling)
#&gt; Iteration: 800 / 1000 [ 80%]  (Sampling)
#&gt; Iteration: 900 / 1000 [ 90%]  (Sampling)
#&gt; Iteration: 1000 / 1000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 1.1122 seconds (Warm-up)
#&gt;                0.622843 seconds (Sampling)
#&gt;                1.73504 seconds (Total)
#&gt; 
#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 3).
#&gt; 
#&gt; Gradient evaluation took 3.3e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.33 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:   1 / 1000 [  0%]  (Warmup)
#&gt; Iteration: 100 / 1000 [ 10%]  (Warmup)
#&gt; Iteration: 200 / 1000 [ 20%]  (Warmup)
#&gt; Iteration: 300 / 1000 [ 30%]  (Warmup)
#&gt; Iteration: 400 / 1000 [ 40%]  (Warmup)
#&gt; Iteration: 500 / 1000 [ 50%]  (Warmup)
#&gt; Iteration: 501 / 1000 [ 50%]  (Sampling)
#&gt; Iteration: 600 / 1000 [ 60%]  (Sampling)
#&gt; Iteration: 700 / 1000 [ 70%]  (Sampling)
#&gt; Iteration: 800 / 1000 [ 80%]  (Sampling)
#&gt; Iteration: 900 / 1000 [ 90%]  (Sampling)
#&gt; Iteration: 1000 / 1000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 1.05191 seconds (Warm-up)
#&gt;                0.877668 seconds (Sampling)
#&gt;                1.92958 seconds (Total)
#&gt; 
#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 4).
#&gt; 
#&gt; Gradient evaluation took 2.2e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.22 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:   1 / 1000 [  0%]  (Warmup)
#&gt; Iteration: 100 / 1000 [ 10%]  (Warmup)
#&gt; Iteration: 200 / 1000 [ 20%]  (Warmup)
#&gt; Iteration: 300 / 1000 [ 30%]  (Warmup)
#&gt; Iteration: 400 / 1000 [ 40%]  (Warmup)
#&gt; Iteration: 500 / 1000 [ 50%]  (Warmup)
#&gt; Iteration: 501 / 1000 [ 50%]  (Sampling)
#&gt; Iteration: 600 / 1000 [ 60%]  (Sampling)
#&gt; Iteration: 700 / 1000 [ 70%]  (Sampling)
#&gt; Iteration: 800 / 1000 [ 80%]  (Sampling)
#&gt; Iteration: 900 / 1000 [ 90%]  (Sampling)
#&gt; Iteration: 1000 / 1000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 1.02242 seconds (Warm-up)
#&gt;                0.925146 seconds (Sampling)
#&gt;                1.94757 seconds (Total)
#&gt; </div><div class='output co'>#&gt; <span class='warning'>Warning: There were 32 divergent transitions after warmup. Increasing adapt_delta above 0.9 may help. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#divergent-transitions-after-warmup</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Examine the pairs() plot to diagnose sampling problems</span></div><div class='input'>
<span class='fu'>pairs</span>(<span class='no'>fit</span>, <span class='kw'>pars</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"wt"</span>, <span class='st'>"sigma"</span>, <span class='st'>"log-posterior"</span>))</div><div class='img'><img src='pairs.stanreg-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>pairs</span>(
  <span class='no'>fit</span>,
  <span class='kw'>pars</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"wt"</span>, <span class='st'>"sigma"</span>, <span class='st'>"log-posterior"</span>),
  <span class='kw'>transformations</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>sigma</span> <span class='kw'>=</span> <span class='st'>"log"</span>), <span class='co'># show log(sigma) instead of sigma</span>
  <span class='kw'>off_diag_fun</span> <span class='kw'>=</span> <span class='st'>"hex"</span> <span class='co'># use hexagonal heatmaps instead of scatterplots</span>
)</div><div class='img'><img src='pairs.stanreg-2.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='kw pkg'>bayesplot</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/bayesplot/topics/bayesplot-colors'>color_scheme_set</a></span>(<span class='st'>"brightblue"</span>)
<span class='fu'>pairs</span>(
  <span class='no'>fit</span>,
  <span class='kw'>pars</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"(Intercept)"</span>, <span class='st'>"wt"</span>, <span class='st'>"sigma"</span>, <span class='st'>"log-posterior"</span>),
  <span class='kw'>transformations</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>sigma</span> <span class='kw'>=</span> <span class='st'>"log"</span>),
  <span class='kw'>off_diag_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>3</span>/<span class='fl'>4</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>/<span class='fl'>3</span>), <span class='co'># size and transparency of scatterplot points</span>
  <span class='kw'>np_style</span> <span class='kw'>=</span> <span class='fu'>pairs_style_np</span>(<span class='kw'>div_color</span> <span class='kw'>=</span> <span class='st'>"black"</span>, <span class='kw'>div_shape</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='co'># color and shape of the divergences</span>
)</div><div class='img'><img src='pairs.stanreg-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Using the condition argument to show divergences above the diagonal </span>
<span class='fu'>pairs</span>(
  <span class='no'>fit</span>,
  <span class='kw'>pars</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"(Intercept)"</span>, <span class='st'>"wt"</span>, <span class='st'>"log-posterior"</span>),
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='fu'>pairs_condition</span>(<span class='kw'>nuts</span> <span class='kw'>=</span> <span class='st'>"divergent__"</span>)
)</div><div class='img'><img src='pairs.stanreg-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
            
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

