<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summarize the priors used for an rstanarm model — prior_summary.stanreg • rstanarm</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rstanarm</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../dev-notes/index.html">Develop</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstanarm">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarize the priors used for an rstanarm model</h1>
    </div>

    
    <p>The <code>prior_summary</code> method provides a summary of the prior distributions
used for the parameters in a given model. In some cases the user-specified
prior does not correspond exactly to the prior used internally by
<span class="pkg">rstanarm</span> (see the sections below). Especially in these cases, but also
in general, it can be much more useful to visualize the priors. Visualizing
the priors can be done using the <code><a href='posterior_vs_prior.html'>posterior_vs_prior</a></code> function,
or alternatively by fitting the model with the <code>prior_PD</code> argument set
to <code>TRUE</code> (to draw from the prior predictive distribution instead of
conditioning on the outcome) and then plotting the parameters.</p>
    

    <pre class="usage"><span class='co'># S3 method for stanreg</span>
<span class='fu'>prior_summary</span>(<span class='no'>object</span>, <span class='kw'>digits</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A fitted model object returned by one of the 
<span class="pkg">rstanarm</span> modeling functions. See <code><a href='stanreg-objects.html'>stanreg-objects</a></code>.</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>Number of digits to use for rounding.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently ignored by the method for stanreg objects.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of class "prior_summary.stanreg", which has its own print
  method.</p>
    
    <h2 class="hasAnchor" id="intercept-after-predictors-centered-"><a class="anchor" href="#intercept-after-predictors-centered-"></a>Intercept (after predictors centered)</h2>

    <p>For <span class="pkg">rstanarm</span> modeling functions that accept a <code>prior_intercept</code> 
  argument, the specified prior for the intercept term applies to the 
  intercept after <span class="pkg">rstanarm</span> internally centers the predictors so they 
  each have mean zero. The estimate of the intercept returned to the user 
  correspond to the intercept with the predictors as specified by the user 
  (unmodified by <span class="pkg">rstanarm</span>), but when <em>specifying</em> the prior the 
  intercept can be thought of as the expected outcome when the predictors are
  set to their means. The only exception to this is for models fit with the 
  <code>sparse</code> argument set to <code>TRUE</code> (which is only possible with a
  subset of the modeling functions and never the default).</p>
    
    <h2 class="hasAnchor" id="adjusted-scales"><a class="anchor" href="#adjusted-scales"></a>Adjusted scales</h2>

    <p>For some models you may see "<code>adjusted scale</code>"
  in the printed output and adjusted scales included in the object returned 
  by <code>prior_summary</code>. These adjusted scale values are the prior scales 
  actually used by <span class="pkg">rstanarm</span> and are computed by adjusting the prior 
  scales specified by the user to account for the scales of the predictors 
  (as described in the documentation for the <code><a href='priors.html'>autoscale</a></code>
  argument). To disable internal prior scale adjustments set the 
  <code>autoscale</code> argument to <code>FALSE</code> when setting a prior using one of
  the distributions that accepts an <code>autoscale</code> argument. For example,
  <code>normal(0, 5, autoscale=FALSE)</code> instead of just <code>normal(0, 5)</code>.</p>
    
    <h2 class="hasAnchor" id="coefficients-in-q-space"><a class="anchor" href="#coefficients-in-q-space"></a>Coefficients in Q-space</h2>

    
    <p>For the models fit with an <span class="pkg">rstanarm</span> modeling function that supports 
  the <code>QR</code> argument (see e.g, <code><a href='stan_glm.html'>stan_glm</a></code>), if <code>QR</code> is 
  set to <code>TRUE</code> then the prior distributions for the regression
  coefficients specified using the <code>prior</code> argument are not relative to
  the original predictor variables \(X\) but rather to the variables in the
  matrix \(Q\) obtained from the \(QR\) decomposition of \(X\).
    In particular, if <code>prior = normal(location,scale)</code>, then this prior on
  the coefficients in \(Q\)-space can be easily translated into a joint 
  multivariate normal (MVN) prior on the coefficients on the original 
  predictors in \(X\). Letting \(\theta\) denote the coefficients on
  \(Q\) and \(\beta\) the coefficients on \(X\) then if \(\theta
  \sim N(\mu, \sigma)\) the corresponding prior on
  \(\beta\) is \(\beta \sim MVN(R\mu, R'R\sigma^2)\), where \(\mu\) and \(\sigma\) are vectors of the
  appropriate length. Technically <span class="pkg">rstanarm</span> uses a scaled \(QR\)
  decomposition to ensure that the columns of the predictor matrix used to
  fit the model all have unit scale. The matrices actually used are
  \(Q^\ast = Q \sqrt{n-1}\) and \(R^\ast =
  \frac{1}{\sqrt{n-1}} R\) (see the documentation for the
  <code><a href='stan_glm.html'>QR</a></code> argument).
    If you are interested in the prior on \(\beta\) implied by the prior on
  \(\theta\), we recommend visualizing it as described above in the
  <strong>Description</strong> section, which is simpler than working it out
  analytically.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='posterior_vs_prior.html'>posterior_vs_prior</a></code>, <code><a href='priors.html'>priors</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (!<span class='fu'>exists</span>(<span class='st'>"example_model"</span>)) <span class='fu'>example</span>(<span class='no'>example_model</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: no help found for ‘example_model’</span></div><div class='input'><span class='fu'>prior_summary</span>(<span class='no'>example_model</span>)</div><div class='output co'>#&gt; <span class='error'>Error in prior_summary(example_model): object 'example_model' not found</span></div><div class='input'>
<span class='no'>priors</span> <span class='kw'>&lt;-</span> <span class='fu'>prior_summary</span>(<span class='no'>example_model</span>)</div><div class='output co'>#&gt; <span class='error'>Error in prior_summary(example_model): object 'example_model' not found</span></div><div class='input'><span class='fu'>names</span>(<span class='no'>priors</span>)</div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): object 'priors' not found</span></div><div class='input'><span class='no'>priors</span>$<span class='no'>prior</span>$<span class='no'>scale</span></div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): object 'priors' not found</span></div><div class='input'><span class='no'>priors</span>$<span class='no'>prior</span>$<span class='no'>adjusted_scale</span></div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): object 'priors' not found</span></div><div class='input'>
<span class='co'># for a glm with adjusted scales (see Details, above), compare </span>
<span class='co'># the default (rstanarm adjusting the scales) to setting </span>
<span class='co'># autoscale=FALSE for prior on coefficients</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_glm.html'>stan_glm</a></span>(<span class='no'>mpg</span> ~ <span class='no'>wt</span> + <span class='no'>am</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>,
                <span class='kw'>prior</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='fl'>0</span>, <span class='fu'>c</span>(<span class='fl'>2.5</span>, <span class='fl'>4</span>)),
                <span class='kw'>prior_intercept</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='fl'>0</span>, <span class='fl'>5</span>),
                <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>1</span>) <span class='co'># only for demonstration </span></div><div class='output co'>#&gt; <span class='message'>trying deprecated constructor; please alert package maintainer</span></div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 1).
#&gt; 
#&gt; Gradient evaluation took 2.8e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.28 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; WARNING: No variance estimation is
#&gt;          performed for num_warmup &lt; 20
#&gt; 
#&gt; Iteration: 1 / 10 [ 10%]  (Warmup)
#&gt; Iteration: 2 / 10 [ 20%]  (Warmup)
#&gt; Iteration: 3 / 10 [ 30%]  (Warmup)
#&gt; Iteration: 4 / 10 [ 40%]  (Warmup)
#&gt; Iteration: 5 / 10 [ 50%]  (Warmup)
#&gt; Iteration: 6 / 10 [ 60%]  (Sampling)
#&gt; Iteration: 7 / 10 [ 70%]  (Sampling)
#&gt; Iteration: 8 / 10 [ 80%]  (Sampling)
#&gt; Iteration: 9 / 10 [ 90%]  (Sampling)
#&gt; Iteration: 10 / 10 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 0.000105 seconds (Warm-up)
#&gt;                0.001174 seconds (Sampling)
#&gt;                0.001279 seconds (Total)
#&gt; </div><div class='output co'>#&gt; <span class='warning'>Warning: There were 1 chains where the estimated Bayesian Fraction of Missing Information was low. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#bfmi-low</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Examine the pairs() plot to diagnose sampling problems</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Markov chains did not converge! Do not analyze results!</span></div><div class='input'><span class='fu'>prior_summary</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; Priors for model 'fit' 
#&gt; ------
#&gt; Intercept (after predictors centered)
#&gt;  ~ normal(location = 0, scale = 5)
#&gt;      **adjusted scale = 30.13
#&gt; 
#&gt; Coefficients
#&gt;  ~ normal(location = [0,0], scale = [2.5,4.0])
#&gt;      **adjusted scale = [15.40,24.11]
#&gt; 
#&gt; Auxiliary (sigma)
#&gt;  ~ exponential(rate = 1)
#&gt;      **adjusted scale = 6.03 (adjusted rate = 1/adjusted scale)
#&gt; ------
#&gt; See help('prior_summary.stanreg') for more details</div><div class='input'>
<span class='no'>fit2</span> <span class='kw'>&lt;-</span> <span class='fu'>update</span>(<span class='no'>fit</span>, <span class='kw'>prior</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='fl'>0</span>, <span class='fu'>c</span>(<span class='fl'>2.5</span>, <span class='fl'>4</span>), <span class='kw'>autoscale</span><span class='kw'>=</span><span class='fl'>FALSE</span>),
               <span class='kw'>prior_intercept</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='fl'>0</span>, <span class='fl'>5</span>, <span class='kw'>autoscale</span><span class='kw'>=</span><span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; <span class='message'>trying deprecated constructor; please alert package maintainer</span></div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 1).
#&gt; 
#&gt; Gradient evaluation took 2.3e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.23 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; WARNING: No variance estimation is
#&gt;          performed for num_warmup &lt; 20
#&gt; 
#&gt; Iteration: 1 / 10 [ 10%]  (Warmup)
#&gt; Iteration: 2 / 10 [ 20%]  (Warmup)
#&gt; Iteration: 3 / 10 [ 30%]  (Warmup)
#&gt; Iteration: 4 / 10 [ 40%]  (Warmup)
#&gt; Iteration: 5 / 10 [ 50%]  (Warmup)
#&gt; Iteration: 6 / 10 [ 60%]  (Sampling)
#&gt; Iteration: 7 / 10 [ 70%]  (Sampling)
#&gt; Iteration: 8 / 10 [ 80%]  (Sampling)
#&gt; Iteration: 9 / 10 [ 90%]  (Sampling)
#&gt; Iteration: 10 / 10 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 0.002262 seconds (Warm-up)
#&gt;                0.000571 seconds (Sampling)
#&gt;                0.002833 seconds (Total)
#&gt; </div><div class='output co'>#&gt; <span class='warning'>Warning: There were 1 chains where the estimated Bayesian Fraction of Missing Information was low. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#bfmi-low</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Examine the pairs() plot to diagnose sampling problems</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Markov chains did not converge! Do not analyze results!</span></div><div class='input'><span class='fu'>prior_summary</span>(<span class='no'>fit2</span>)</div><div class='output co'>#&gt; Priors for model 'fit2' 
#&gt; ------
#&gt; Intercept (after predictors centered)
#&gt;  ~ normal(location = 0, scale = 5)
#&gt; 
#&gt; Coefficients
#&gt;  ~ normal(location = [0,0], scale = [2.5,4.0])
#&gt; 
#&gt; Auxiliary (sigma)
#&gt;  ~ exponential(rate = 1)
#&gt;      **adjusted scale = 6.03 (adjusted rate = 1/adjusted scale)
#&gt; ------
#&gt; See help('prior_summary.stanreg') for more details</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#intercept-after-predictors-centered-">Intercept (after predictors centered)</a></li>

      <li><a href="#adjusted-scales">Adjusted scales</a></li>

      <li><a href="#coefficients-in-q-space">Coefficients in Q-space</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
