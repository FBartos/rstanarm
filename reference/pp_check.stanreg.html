<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Graphical posterior predictive checks — pp_check.stanreg • rstanarm</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Graphical posterior predictive checks — pp_check.stanreg" />
<meta property="og:description" content="Interface to the PPC (posterior predictive checking) module
in the bayesplot package, providing various plots comparing the 
observed outcome variable \(y\) to simulated datasets \(y^{rep}\) 
from the posterior predictive distribution. The pp_check method for 
stanreg-objects prepares the arguments required for the specified 
bayesplot PPC plotting function and then calls that function. It is 
also straightforward to use the functions from the bayesplot package 
directly rather than via the pp_check method. Examples of both are
given below." />
<meta property="og:image" content="https://mc-stan.org/rstanarm/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstanarm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.19.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../dev-notes/index.html">Develop</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstanarm">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Graphical posterior predictive checks</h1>
    
    <div class="hidden name"><code>pp_check.stanreg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Interface to the <a href='https://mc-stan.org/bayesplot/reference/PPC-overview.html'>PPC</a> (posterior predictive checking) module
in the <span class="pkg">bayesplot</span> package, providing various plots comparing the 
observed outcome variable \(y\) to simulated datasets \(y^{rep}\) 
from the posterior predictive distribution. The <code>pp_check</code> method for 
<a href='stanreg-objects.html'>stanreg-objects</a> prepares the arguments required for the specified 
<span class="pkg">bayesplot</span> PPC plotting function and then calls that function. It is 
also straightforward to use the functions from the <span class="pkg">bayesplot</span> package 
directly rather than via the <code>pp_check</code> method. Examples of both are
given below.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for stanreg</span>
<span class='fu'>pp_check</span>(<span class='no'>object</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"dens_overlay"</span>,
  <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A fitted model object returned by one of the 
<span class="pkg">rstanarm</span> modeling functions. See <code><a href='stanreg-objects.html'>stanreg-objects</a></code>.</p></td>
    </tr>
    <tr>
      <th>plotfun</th>
      <td><p>A character string naming the <span class="pkg">bayesplot</span> 
<a href='https://mc-stan.org/bayesplot/reference/PPC-overview.html'>PPC</a> function to use. The default is to call
<code><a href='https://mc-stan.org/bayesplot/reference/PPC-distributions.html'>ppc_dens_overlay</a></code>. <code>plotfun</code> can be specified
either as the full name of a <span class="pkg">bayesplot</span> plotting function (e.g.
<code>"ppc_hist"</code>) or can be abbreviated to the part of the name following
the <code>"ppc_"</code> prefix (e.g. <code>"hist"</code>). To get the names of all
available PPC functions see <code><a href='https://mc-stan.org/bayesplot/reference/available_ppc.html'>available_ppc</a></code>.</p></td>
    </tr>
    <tr>
      <th>nreps</th>
      <td><p>The number of \(y^{rep}\) datasets to generate from the 
<a href='posterior_predict.stanreg.html'>posterior predictive distribution</a> and show in
the plots. The default depends on <code>plotfun</code>. For functions that plot
each <code>yrep</code> dataset separately (e.g. <code>ppc_hist</code>), <code>nreps</code>
defaults to a small value to make the plots readable. For functions that
overlay many <code>yrep</code> datasets (e.g., <code>ppc_dens_overlay</code>) a larger
number is used by default, and for other functions (e.g. <code>ppc_stat</code>)
the default is to set <code>nreps</code> equal to the posterior sample size.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>An optional <code><a href='https://rdrr.io/r/base/Random.html'>seed</a></code> to pass to 
<code><a href='posterior_predict.stanreg.html'>posterior_predict</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additonal arguments passed to the <span class="pkg">bayesplot</span> function 
called. For many plotting functions <code>...</code> is optional, however for 
functions that require a <code>group</code> or <code>x</code> argument, these arguments
should be specified in <code>...</code>. If specifying <code>group</code> and/or 
<code>x</code>, they can be provided as either strings naming variables (in which
case they are searched for in the model frame) or as vectors containing the
actual values of the variables. See the <strong>Examples</strong> section, below.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>pp_check</code> returns a ggplot object that can be further
  customized using the <span class="pkg">ggplot2</span> package.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>For binomial data, plots of \(y\) and \(y^{rep}\) show the 
  proportion of 'successes' rather than the raw count. Also for binomial 
  models see <code><a href='https://mc-stan.org/bayesplot/reference/PPC-errors.html'>ppc_error_binned</a></code> for binned residual
  plots.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari,
  A., and Rubin, D. B. (2013). <em>Bayesian Data Analysis.</em> Chapman &amp; Hall/CRC
  Press, London, third edition. (Ch. 6)</p>
<p>Gabry, J. , Simpson, D. , Vehtari, A. , Betancourt, M. and
  Gelman, A. (2019), Visualization in Bayesian workflow. <em>J. R. Stat.
  Soc. A</em>, 182: 389-402. doi:10.1111/rssa.12378,
  (<a href='https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssa.12378'>journal version</a>,
  <a href='https://arxiv.org/abs/1709.01449'>arXiv preprint</a>,
  <a href='https://github.com/jgabry/bayes-vis-paper'>code on GitHub</a>)</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'>
<ul>
<li><p>The vignettes in the <span class="pkg">bayesplot</span> package for many examples.
    Examples of posterior predictive checks can also be found in the
    <span class="pkg">rstanarm</span> vignettes and demos.</p></li>
<li><p><code><a href='https://mc-stan.org/bayesplot/reference/PPC-overview.html'>PPC-overview</a></code> (<span class="pkg">bayesplot</span>) for links to 
    the documentation for all the available plotting functions.</p></li>
<li><p><code><a href='posterior_predict.stanreg.html'>posterior_predict</a></code> for drawing from the posterior 
    predictive distribution.</p></li>
<li><p><code><a href='https://mc-stan.org/bayesplot/reference/bayesplot-colors.html'>color_scheme_set</a></code> to change the color scheme 
    of the plots.</p></li>
</ul>
</div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_glmer.html'>stan_glmer</a></span>(<span class='no'>mpg</span> ~ <span class='no'>wt</span> + <span class='no'>am</span> + (<span class='fl'>1</span><span class='kw'>|</span><span class='no'>cyl</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>,
                  <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>400</span>, <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='co'># just to keep example quick</span></div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 1).
#&gt; Chain 1: 
#&gt; Chain 1: Gradient evaluation took 3e-05 seconds
#&gt; Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.3 seconds.
#&gt; Chain 1: Adjust your expectations accordingly!
#&gt; Chain 1: 
#&gt; Chain 1: 
#&gt; Chain 1: Iteration:   1 / 400 [  0%]  (Warmup)
#&gt; Chain 1: Iteration:  40 / 400 [ 10%]  (Warmup)
#&gt; Chain 1: Iteration:  80 / 400 [ 20%]  (Warmup)
#&gt; Chain 1: Iteration: 120 / 400 [ 30%]  (Warmup)
#&gt; Chain 1: Iteration: 160 / 400 [ 40%]  (Warmup)
#&gt; Chain 1: Iteration: 200 / 400 [ 50%]  (Warmup)
#&gt; Chain 1: Iteration: 201 / 400 [ 50%]  (Sampling)
#&gt; Chain 1: Iteration: 240 / 400 [ 60%]  (Sampling)
#&gt; Chain 1: Iteration: 280 / 400 [ 70%]  (Sampling)
#&gt; Chain 1: Iteration: 320 / 400 [ 80%]  (Sampling)
#&gt; Chain 1: Iteration: 360 / 400 [ 90%]  (Sampling)
#&gt; Chain 1: Iteration: 400 / 400 [100%]  (Sampling)
#&gt; Chain 1: 
#&gt; Chain 1:  Elapsed Time: 0.136456 seconds (Warm-up)
#&gt; Chain 1:                0.082549 seconds (Sampling)
#&gt; Chain 1:                0.219005 seconds (Total)
#&gt; Chain 1: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 2).
#&gt; Chain 2: 
#&gt; Chain 2: Gradient evaluation took 3.1e-05 seconds
#&gt; Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.31 seconds.
#&gt; Chain 2: Adjust your expectations accordingly!
#&gt; Chain 2: 
#&gt; Chain 2: 
#&gt; Chain 2: Iteration:   1 / 400 [  0%]  (Warmup)
#&gt; Chain 2: Iteration:  40 / 400 [ 10%]  (Warmup)
#&gt; Chain 2: Iteration:  80 / 400 [ 20%]  (Warmup)
#&gt; Chain 2: Iteration: 120 / 400 [ 30%]  (Warmup)
#&gt; Chain 2: Iteration: 160 / 400 [ 40%]  (Warmup)
#&gt; Chain 2: Iteration: 200 / 400 [ 50%]  (Warmup)
#&gt; Chain 2: Iteration: 201 / 400 [ 50%]  (Sampling)
#&gt; Chain 2: Iteration: 240 / 400 [ 60%]  (Sampling)
#&gt; Chain 2: Iteration: 280 / 400 [ 70%]  (Sampling)
#&gt; Chain 2: Iteration: 320 / 400 [ 80%]  (Sampling)
#&gt; Chain 2: Iteration: 360 / 400 [ 90%]  (Sampling)
#&gt; Chain 2: Iteration: 400 / 400 [100%]  (Sampling)
#&gt; Chain 2: 
#&gt; Chain 2:  Elapsed Time: 0.139763 seconds (Warm-up)
#&gt; Chain 2:                0.081983 seconds (Sampling)
#&gt; Chain 2:                0.221746 seconds (Total)
#&gt; Chain 2: </div><div class='output co'>#&gt; <span class='warning'>Warning: Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.</span>
#&gt; <span class='warning'>Running the chains for more iterations may help. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#bulk-ess</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.</span>
#&gt; <span class='warning'>Running the chains for more iterations may help. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#tail-ess</span></div><div class='input'>
<span class='co'># Compare distribution of y to distributions of multiple yrep datasets</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>)</div><div class='img'><img src='pp_check.stanreg-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"boxplot"</span>, <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>notch</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='pp_check.stanreg-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"hist"</span>, <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='message'>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></div><div class='img'><img src='pp_check.stanreg-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># \donttest{</span>
<span class='co'># Same plot (up to RNG noise) using bayesplot package directly</span>
<span class='kw pkg'>bayesplot</span><span class='kw ns'>::</span><span class='fu'><a href='https://mc-stan.org/bayesplot/reference/PPC-distributions.html'>ppc_hist</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>mtcars</span>$<span class='no'>mpg</span>, <span class='kw'>yrep</span> <span class='kw'>=</span> <span class='fu'><a href='posterior_predict.stanreg.html'>posterior_predict</a></span>(<span class='no'>fit</span>, <span class='kw'>draws</span> <span class='kw'>=</span> <span class='fl'>3</span>))</div><div class='output co'>#&gt; <span class='message'>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></div><div class='img'><img src='pp_check.stanreg-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Check histograms of test statistics by level of grouping variable 'cyl'</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"stat_grouped"</span>, <span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"median"</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='st'>"cyl"</span>)</div><div class='output co'>#&gt; <span class='message'>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></div><div class='img'><img src='pp_check.stanreg-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Defining a custom test statistic</span>
<span class='no'>q25</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>y</span>) <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span>(<span class='no'>y</span>, <span class='kw'>probs</span> <span class='kw'>=</span> <span class='fl'>0.25</span>)
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"stat_grouped"</span>, <span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"q25"</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='st'>"cyl"</span>)</div><div class='output co'>#&gt; <span class='error'>Error in get(as.character(FUN), mode = "function", envir = envir): object 'q25' of mode 'function' was not found</span></div><div class='input'>
<span class='co'># Scatterplot of two test statistics</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"stat_2d"</span>, <span class='kw'>stat</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"mean"</span>, <span class='st'>"sd"</span>))</div><div class='img'><img src='pp_check.stanreg-6.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Scatterplot of y vs. average yrep</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"scatter_avg"</span>) <span class='co'># y vs. average yrep</span></div><div class='img'><img src='pp_check.stanreg-7.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># Same plot (up to RNG noise) using bayesplot package directly</span>
<span class='kw pkg'>bayesplot</span><span class='kw ns'>::</span><span class='fu'><a href='https://mc-stan.org/bayesplot/reference/PPC-scatterplots.html'>ppc_scatter_avg</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>mtcars</span>$<span class='no'>mpg</span>, <span class='kw'>yrep</span> <span class='kw'>=</span> <span class='fu'><a href='posterior_predict.stanreg.html'>posterior_predict</a></span>(<span class='no'>fit</span>))</div><div class='img'><img src='pp_check.stanreg-8.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Scatterplots of y vs. several individual yrep datasets</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"scatter"</span>, <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='fl'>3</span>)</div><div class='img'><img src='pp_check.stanreg-9.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Same plot (up to RNG noise) using bayesplot package directly</span>
<span class='kw pkg'>bayesplot</span><span class='kw ns'>::</span><span class='fu'><a href='https://mc-stan.org/bayesplot/reference/PPC-scatterplots.html'>ppc_scatter</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>mtcars</span>$<span class='no'>mpg</span>, <span class='kw'>yrep</span> <span class='kw'>=</span> <span class='fu'><a href='posterior_predict.stanreg.html'>posterior_predict</a></span>(<span class='no'>fit</span>, <span class='kw'>draws</span> <span class='kw'>=</span> <span class='fl'>3</span>))</div><div class='img'><img src='pp_check.stanreg-10.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># yrep intervals with y points overlaid</span>
<span class='co'># by default 1:length(y) used on x-axis but can also specify an x variable</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"intervals"</span>)</div><div class='output co'>#&gt; <span class='message'>'x' not specified in '...'. Using x=1:length(y).</span></div><div class='img'><img src='pp_check.stanreg-11.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"intervals"</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"wt"</span>) + <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span>(<span class='st'>"wt"</span>)</div><div class='img'><img src='pp_check.stanreg-12.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Same plot (up to RNG noise) using bayesplot package directly</span>
<span class='kw pkg'>bayesplot</span><span class='kw ns'>::</span><span class='fu'><a href='https://mc-stan.org/bayesplot/reference/PPC-intervals.html'>ppc_intervals</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>mtcars</span>$<span class='no'>mpg</span>, <span class='kw'>yrep</span> <span class='kw'>=</span> <span class='fu'><a href='posterior_predict.stanreg.html'>posterior_predict</a></span>(<span class='no'>fit</span>),
                         <span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>mtcars</span>$<span class='no'>wt</span>) + <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span>(<span class='st'>"wt"</span>)</div><div class='img'><img src='pp_check.stanreg-13.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># predictive errors</span>
<span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"error_hist"</span>, <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='fl'>6</span>)</div><div class='output co'>#&gt; <span class='message'>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></div><div class='img'><img src='pp_check.stanreg-14.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>pp_check</span>(<span class='no'>fit</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"error_scatter_avg_vs_x"</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"wt"</span>) +
  <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span>(<span class='st'>"wt"</span>)</div><div class='img'><img src='pp_check.stanreg-15.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Example of a PPC for ordinal models (stan_polr)</span>
<span class='no'>fit2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_polr.html'>stan_polr</a></span>(<span class='no'>tobgp</span> ~ <span class='no'>agegp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>esoph</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"probit"</span>,
                  <span class='kw'>prior</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>R2</a></span>(<span class='fl'>0.2</span>, <span class='st'>"mean"</span>), <span class='kw'>init_r</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)</div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'polr' NOW (CHAIN 1).
#&gt; Chain 1: 
#&gt; Chain 1: Gradient evaluation took 0.000339 seconds
#&gt; Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 3.39 seconds.
#&gt; Chain 1: Adjust your expectations accordingly!
#&gt; Chain 1: 
#&gt; Chain 1: 
#&gt; Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 1: 
#&gt; Chain 1:  Elapsed Time: 0.398418 seconds (Warm-up)
#&gt; Chain 1:                0.559773 seconds (Sampling)
#&gt; Chain 1:                0.958191 seconds (Total)
#&gt; Chain 1: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'polr' NOW (CHAIN 2).
#&gt; Chain 2: 
#&gt; Chain 2: Gradient evaluation took 2.8e-05 seconds
#&gt; Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.28 seconds.
#&gt; Chain 2: Adjust your expectations accordingly!
#&gt; Chain 2: 
#&gt; Chain 2: 
#&gt; Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 2: 
#&gt; Chain 2:  Elapsed Time: 0.433356 seconds (Warm-up)
#&gt; Chain 2:                0.416801 seconds (Sampling)
#&gt; Chain 2:                0.850157 seconds (Total)
#&gt; Chain 2: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'polr' NOW (CHAIN 3).
#&gt; Chain 3: 
#&gt; Chain 3: Gradient evaluation took 2.8e-05 seconds
#&gt; Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.28 seconds.
#&gt; Chain 3: Adjust your expectations accordingly!
#&gt; Chain 3: 
#&gt; Chain 3: 
#&gt; Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 3: 
#&gt; Chain 3:  Elapsed Time: 0.608242 seconds (Warm-up)
#&gt; Chain 3:                0.564784 seconds (Sampling)
#&gt; Chain 3:                1.17303 seconds (Total)
#&gt; Chain 3: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'polr' NOW (CHAIN 4).
#&gt; Chain 4: 
#&gt; Chain 4: Gradient evaluation took 2.9e-05 seconds
#&gt; Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.29 seconds.
#&gt; Chain 4: Adjust your expectations accordingly!
#&gt; Chain 4: 
#&gt; Chain 4: 
#&gt; Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 4: 
#&gt; Chain 4:  Elapsed Time: 0.412907 seconds (Warm-up)
#&gt; Chain 4:                0.46905 seconds (Sampling)
#&gt; Chain 4:                0.881957 seconds (Total)
#&gt; Chain 4: </div><div class='input'><span class='fu'>pp_check</span>(<span class='no'>fit2</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"bars"</span>, <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)</div><div class='img'><img src='pp_check.stanreg-16.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>pp_check</span>(<span class='no'>fit2</span>, <span class='kw'>plotfun</span> <span class='kw'>=</span> <span class='st'>"bars_grouped"</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>esoph</span>$<span class='no'>agegp</span>,
         <span class='kw'>nreps</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)</div><div class='img'><img src='pp_check.stanreg-17.png' alt='' width='700' height='433' /></div><div class='input'># }
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


