<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prior Distributions for rstanarm Models • rstanarm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Prior Distributions for rstanarm Models">
<meta property="og:description" content="rstanarm">
<meta property="og:image" content="https://mc-stan.org/rstanarm/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstanarm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.21.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../dev-notes/index.html">Develop</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
    <li>
      <a href="https://mc-stan.org/posterior">posterior</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstanarm">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="priors_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Prior Distributions for rstanarm Models</h1>
                        <h4 class="author">Jonah Gabry and Ben Goodrich</h4>
            
            <h4 class="date">2020-07-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/stan-dev/rstanarm/blob/master/vignettes/priors.Rmd"><code>vignettes/priors.Rmd</code></a></small>
      <div class="hidden name"><code>priors.Rmd</code></div>

    </div>

    
    
<!--
%\VignetteEngine{knitr::rmarkdown}
%\VignetteIndexEntry{Prior Distributions}
-->
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">bayesplot</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span>(<span class="kw pkg">bayesplot</span><span class="kw ns">::</span><span class="fu"><a href="https://mc-stan.org/bayesplot/reference/theme_default.html">theme_default</a></span>())</pre></body></html></div>
<div id="july-2020-update" class="section level1">
<h1 class="hasAnchor">
<a href="#july-2020-update" class="anchor"></a>July 2020 Update</h1>
<p>As of July 2020 there are a few changes to prior distributions:</p>
<ul>
<li><p>Except for in default priors, <code>autoscale</code> now defaults to <code>FALSE</code>. This means that when specifying custom priors you no longer need to manually set <code>autoscale=FALSE</code> every time you use a distribution.</p></li>
<li><p>There are minor changes to the default priors on the intercept and (non-hierarchical) regression coefficients. See <strong>Default priors and scale adjustments</strong> below.</p></li>
</ul>
<p>We recommend the new book <a href="https://avehtari.github.io/ROS-Examples/">Regression and Other Stories</a>, which discusses the background behind the default priors in <strong>rstanarm</strong> and also provides examples of specifying non-default priors.</p>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This vignette provides an overview of how the specification of prior distributions works in the <strong>rstanarm</strong> package. It is still a work in progress and more content will be added in future versions of <strong>rstanarm</strong>. Before reading this vignette it is important to first read the <a href="rstanarm.html">How to Use the <strong>rstanarm</strong> Package</a> vignette, which provides a general overview of the package.</p>
<p>Every modeling function in <strong>rstanarm</strong> offers a subset of the arguments in the table below which are used for specifying prior distributions for the model parameters.</p>
<p><br></p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Argument</th>
<th>Used in</th>
<th>Applies to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>prior_intercept</code></td>
<td>All modeling functions except <code>stan_polr</code> and <code>stan_nlmer</code>
</td>
<td>Model intercept, after centering predictors.</td>
</tr>
<tr class="even">
<td><code>prior</code></td>
<td>All modeling functions</td>
<td>Regression coefficients. Does <em>not</em> include coefficients that vary by group in a multilevel model (see <code>prior_covariance</code>).</td>
</tr>
<tr class="odd">
<td><code>prior_aux</code></td>
<td>
<code>stan_glm</code>*, <code>stan_glmer</code>*, <code>stan_gamm4</code>, <code>stan_nlmer</code>
</td>
<td>Auxiliary parameter, e.g. error SD (interpretation depends on the GLM).</td>
</tr>
<tr class="even">
<td><code>prior_covariance</code></td>
<td>
<code>stan_glmer</code>*, <code>stan_gamm4</code>, <code>stan_nlmer</code>
</td>
<td>Covariance matrices in multilevel models with varying slopes and intercepts. See the <a href="http://mc-stan.org/rstanarm/articles/glmer.html"><code>stan_glmer</code> vignette</a> for details on this prior.</td>
</tr>
</tbody>
</table>
<p>* <code>stan_glm</code> also implies <code>stan_glm.nb</code>. <code>stan_glmer</code> implies <code>stan_lmer</code> and <code>stan_glmer.nb</code>.</p>
<p><br></p>
<p>The <code>stan_polr</code>, <code>stan_betareg</code>, and <code>stan_gamm4</code> functions also provide additional arguments specific only to those models:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Argument</th>
<th>Used only in</th>
<th>Applies to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>prior_smooth</code></td>
<td><code>stan_gamm4</code></td>
<td>Prior for hyperparameters in GAMs (lower values yield less flexible smooth functions).</td>
</tr>
<tr class="even">
<td><code>prior_counts</code></td>
<td><code>stan_polr</code></td>
<td>Prior counts of an <em>ordinal</em> outcome (when predictors at sample means).</td>
</tr>
<tr class="odd">
<td><code>prior_z</code></td>
<td><code>stan_betareg</code></td>
<td>Coefficients in the model for <code>phi</code>.</td>
</tr>
<tr class="even">
<td><code>prior_intercept_z</code></td>
<td><code>stan_betareg</code></td>
<td>Intercept in the model for <code>phi</code>.</td>
</tr>
<tr class="odd">
<td><code>prior_phi</code></td>
<td><code>stan_betareg</code></td>
<td>
<code>phi</code>, if not modeled as function of predictors.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>To specify these arguments the user provides a call to one of the various available functions for specifying priors (e.g., <code>prior = normal(0, 1)</code>, <code>prior = cauchy(c(0, 1), c(1, 2.5))</code>). The documentation for these functions can be found at <code><a href="../reference/priors.html">help("priors")</a></code>. The <strong>rstanarm</strong> documentation and the other <a href="index.html">vignettes</a> provide many examples of using these arguments to specify priors and the documentation for these arguments on the help pages for the various <strong>rstanarm</strong> modeling functions (e.g., <code><a href="../reference/stan_glm.html">help("stan_glm")</a></code>) also explains which distributions can be used when specifying each of the prior-related arguments.</p>
<p><br></p>
</div>
<div id="default-weakly-informative-prior-distributions" class="section level1">
<h1 class="hasAnchor">
<a href="#default-weakly-informative-prior-distributions" class="anchor"></a>Default (Weakly Informative) Prior Distributions</h1>
<p>With very few exceptions, the default priors in <strong>rstanarm</strong> —the priors used if the arguments in the tables above are untouched— are <em>not</em> flat priors. Rather, the defaults are intended to be <em>weakly informative</em>. That is, they are designed to provide moderate regularization and help stabilize computation. For many (if not most) applications the defaults will perform well, but this is not guaranteed (there are no default priors that make sense for every possible model specification).</p>
<p>The way <strong>rstanarm</strong> attempts to make priors weakly informative by default is to internally adjust the scales of the priors. How this works (and, importantly, how to turn it off) is explained below, but first we can look at the default priors in action by fitting a basic linear regression model with the <code>stan_glm</code> function. For specifying priors, the <code>stan_glm</code> function accepts the arguments <code>prior_intercept</code>, <code>prior</code>, and <code>prior_aux</code>. To use the default priors we just leave those arguments at their defaults (i.e., we don’t specify them):</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"rstanarm"</span>)
<span class="no">default_prior_test</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/stan_glm.html">stan_glm</a></span>(<span class="no">mpg</span> ~ <span class="no">wt</span> + <span class="no">am</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mtcars</span>, <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">1</span>)</pre></body></html></div>
<p>The <code>prior_summary</code> function provides a concise summary of the priors used:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="../reference/prior_summary.stanreg.html">prior_summary</a></span>(<span class="no">default_prior_test</span>)</pre></body></html></div>
<pre><code>Priors for model 'default_prior_test' 
------
Intercept (after predictors centered)
  Specified prior:
    ~ normal(location = 20, scale = 2.5)
  Adjusted prior:
    ~ normal(location = 20, scale = 15)

Coefficients
  Specified prior:
    ~ normal(location = [0,0], scale = [2.5,2.5])
  Adjusted prior:
    ~ normal(location = [0,0], scale = [15.40,30.20])

Auxiliary (sigma)
  Specified prior:
    ~ exponential(rate = 1)
  Adjusted prior:
    ~ exponential(rate = 0.17)
------
See help('prior_summary.stanreg') for more details</code></pre>
<p>Starting from the bottom up, we can see that:</p>
<ul>
<li><p><strong>Auxiliary</strong>: <code>sigma</code>, the error standard deviation, has a default prior that is <span class="math inline">\(\mathsf{exponential}(1)\)</span>. However, as a result of the automatic rescaling, the actual scale used was 6.03.</p></li>
<li><p><strong>Coefficients</strong>: By default the regression coefficients (in this case the coefficients on the <code>wt</code> and <code>am</code> variables) are treated as a priori independent with normal priors centered at 0 and with scale (standard deviation) <span class="math inline">\(2.5\)</span>. Like for <code>sigma</code>, in order for the default to be weakly informative <strong>rstanarm</strong> will adjust the scales of the priors on the coefficients. As a result, the prior scales actually used were 15.40 and 30.20.</p></li>
<li><p><strong>Intercept</strong>: For the intercept, the default prior is normal with mean <span class="math inline">\(0\)</span> and standard deviation <span class="math inline">\(2.5\)</span>, but in this case the standard deviation was adjusted to 15.07. There is also a note in parentheses informing you that the prior applies to the intercept after all predictors have been centered (a similar note can be found in the documentation of the <code>prior_intercept</code> argument). In many cases the value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x=0\)</span> is not meaningful and it is easier to think about the value when <span class="math inline">\(x = \bar{x}\)</span>. Therefore placing a prior on the intercept after centering the predictors typically makes it easier to specify a reasonable prior for the intercept. (Note: the user does <em>not</em> need to manually center the predictors.)</p></li>
</ul>
<p>To disable the centering of the predictors, you need to omit the intercept from the model <code>formula</code> and include a column of ones as a predictor (which cannot be named <code>"(Intercept)"</code> in the <code>data.frame</code>). Then you can specify a prior “coefficient” for the column of ones.</p>
<p>The next two subsections describe how the rescaling works and how to easily disable it if desired.</p>
<div id="default-priors-and-scale-adjustments" class="section level3">
<h3 class="hasAnchor">
<a href="#default-priors-and-scale-adjustments" class="anchor"></a>Default priors and scale adjustments</h3>
<p>Automatic scale adjustments happen in two cases:</p>
<ol style="list-style-type: decimal">
<li>When the default priors are used.</li>
<li>When the user sets <code>autoscale=TRUE</code> when specifying their own prior (e.g., <code><a href="../reference/priors.html">normal(0, 3, autoscale=TRUE)</a></code>). See <code><a href="../reference/priors.html">help("priors")</a></code> for a list of distributions to see which have an <code>autoscale</code> argument.</li>
</ol>
<p>Here we describe how the default priors work for the intercept, regression coefficients, and (if applicable) auxiliary parameters. Autoscaling when not using default priors works analogously (if <code>autoscale=TRUE</code>).</p>
<p>Assume we have outcome <span class="math inline">\(y\)</span> and predictors <span class="math inline">\(x_1,\ldots,x_k\)</span> and our model has linear predictor</p>
<p><span class="math display">\[
\alpha + \beta_1 x_1 + \dots + \beta_K x_K.
\]</span></p>
<div id="regression-coefficients" class="section level4">
<h4 class="hasAnchor">
<a href="#regression-coefficients" class="anchor"></a>Regression coefficients</h4>
<p>The default prior on regression coefficients <span class="math inline">\(\beta_k\)</span> is</p>
<p><span class="math display">\[
\beta_k \sim \mathsf{Normal}(0, \, 2.5 \cdot s_y/s_x)
\]</span> where <span class="math inline">\(s_x = \text{sd}(x)\)</span> and <span class="math display">\[ 
s_y =
\begin{cases}
\text{sd}(y) &amp; \text{if } \:\: {\tt family=gaussian(link)}, \\
1 &amp; \text{otherwise}.
\end{cases}
\]</span></p>
<p>This corresponds to <code>prior = normal(0, 2.5, autoscale = TRUE)</code> in <strong>rstanarm</strong> code.</p>
</div>
<div id="intercept" class="section level4">
<h4 class="hasAnchor">
<a href="#intercept" class="anchor"></a>Intercept</h4>
<p>The intercept is assigned a prior indirectly. The <code>prior_intercept</code> argument refers to the intercept after all predictors have been centered (internally by <strong>rstanarm</strong>). That is, instead of placing the prior on the expected value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x=0\)</span>, we place a prior on the expected value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x = \bar{x}\)</span>. The default prior for this centered intercept, say <span class="math inline">\(\alpha_c\)</span>, is</p>
<p><span class="math display">\[
\alpha_c \sim \mathsf{Normal}(m_y, \, 2.5 \cdot s_y)
\]</span> where</p>
<p><span class="math display">\[
m_y =
\begin{cases}
\bar{y} &amp; \text{if } \:\: {\tt family=gaussian(link="identity")}, \\
0 &amp; \text{otherwise}
\end{cases}
\]</span> and <span class="math inline">\(s_y\)</span> is the same as above (either 1 or <span class="math inline">\(\text{sd(y)}\)</span>).</p>
</div>
<div id="auxiliary-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#auxiliary-parameters" class="anchor"></a>Auxiliary parameters</h4>
<p>The default prior on the auxiliary parameter (residual standard deviation for Gaussian, shape for gamma, reciprocal dispersion for negative binomial, etc.) is an exponential distribution with rate <span class="math inline">\(1/s_y\)</span></p>
<p><span class="math display">\[
\text{aux} \sim \mathsf{Exponential}(1/s_y)
\]</span> where <span class="math inline">\(s_y\)</span> is the same as above (either 1 or <span class="math inline">\(\text{sd(y)}\)</span>).</p>
<p>This corresponds to <code>prior_aux = exponential(1, autoscale=TRUE)</code> in <strong>rstanarm</strong> code.</p>
</div>
<div id="note-on-data-based-priors" class="section level4">
<h4 class="hasAnchor">
<a href="#note-on-data-based-priors" class="anchor"></a>Note on data-based priors</h4>
<p>Because the scaling is based on the scales of the predictors (and possibly the outcome) these are technically data-dependent priors. However, since these priors are quite wide (and in most cases rather conservative), the amount of information used is weak and mainly takes into account the order of magnitude of the variables. This enables <strong>rstanarm</strong> to offer defaults that are reasonable for many models.</p>
</div>
</div>
<div id="disabling-prior-scale-adjustments" class="section level3">
<h3 class="hasAnchor">
<a href="#disabling-prior-scale-adjustments" class="anchor"></a>Disabling prior scale adjustments</h3>
<p>To disable automatic rescaling simply specify a prior other than the default. <strong>rstanarm</strong> versions up to and including version <code>2.19.3</code> used to require you to explicitly set the <code>autoscale</code> argument to <code>FALSE</code>, but now autoscaling only happens by default for the default priors. To use autoscaling with manually specified priors you have to set <code>autoscale = TRUE</code>. For example, this prior specification will not include any autoscaling:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">test_no_autoscale</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span>(
    <span class="no">default_prior_test</span>,
    <span class="kw">prior</span> <span class="kw">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span>(<span class="fl">0</span>, <span class="fl">5</span>),
    <span class="kw">prior_intercept</span> <span class="kw">=</span> <span class="fu"><a href="../reference/priors.html">student_t</a></span>(<span class="fl">4</span>, <span class="fl">0</span>, <span class="fl">10</span>),
    <span class="kw">prior_aux</span> <span class="kw">=</span> <span class="fu"><a href="../reference/priors.html">cauchy</a></span>(<span class="fl">0</span>, <span class="fl">3</span>)
  )</pre></body></html></div>
<p>We can verify that the prior scales weren’t adjusted by checking <code>prior_summary</code>:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/prior_summary.stanreg.html">prior_summary</a></span>(<span class="no">test_no_autoscale</span>)</pre></body></html></div>
<pre><code>Priors for model 'test_no_autoscale' 
------
Intercept (after predictors centered)
 ~ student_t(df = 4, location = 0, scale = 10)

Coefficients
 ~ normal(location = [0,0], scale = [5,5])

Auxiliary (sigma)
 ~ half-cauchy(location = 0, scale = 3)
------
See help('prior_summary.stanreg') for more details</code></pre>
<p><br></p>
</div>
</div>
<div id="how-to-specify-flat-priors-and-why-you-typically-shouldnt" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-specify-flat-priors-and-why-you-typically-shouldnt" class="anchor"></a>How to Specify Flat Priors (and why you typically shouldn’t)</h1>
<div id="uninformative-is-usually-unwarranted-and-unrealistic-flat-is-frequently-frivolous-and-fictional" class="section level3">
<h3 class="hasAnchor">
<a href="#uninformative-is-usually-unwarranted-and-unrealistic-flat-is-frequently-frivolous-and-fictional" class="anchor"></a>Uninformative is usually unwarranted and unrealistic (flat is frequently frivolous and fictional)</h3>
<p>When “non-informative” or “uninformative” is used in the context of prior distributions, it typically refers to a flat (uniform) distribution or a nearly flat distribution. Sometimes it may also be used to refer to the parameterization-invariant Jeffreys prior. Although <strong>rstanarm</strong> does not prevent you from using very diffuse or flat priors, unless the data is very strong it is wise to avoid them.</p>
<p>Rarely is it appropriate in any applied setting to use a prior that gives the same (or nearly the same) probability mass to values near zero as it gives values bigger than the age of the universe in nanoseconds. Even a much narrower prior than that, e.g., a normal distribution with <span class="math inline">\(\sigma = 500\)</span>, will tend to put much more probability mass on unreasonable parameter values than reasonable ones. In fact, using the prior <span class="math inline">\(\theta \sim \mathsf{Normal(\mu = 0, \sigma = 500)}\)</span> implies some strange prior beliefs. For example, you believe a priori that <span class="math inline">\(P(|\theta| &lt; 250) &lt; P(|\theta| &gt; 250)\)</span>, which can easily be verified by doing the calculation with the normal CDF</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fl">1</span> - <span class="fl">2</span> * <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">pnorm</a></span>(-<span class="fl">250</span>, <span class="kw">mean</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">500</span>)
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Pr(-250 &lt; theta &lt; 250) ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">p</span>, <span class="fl">2</span>)))</pre></body></html></div>
<pre><code>[1] "Pr(-250 &lt; theta &lt; 250) = 0.38"</code></pre>
<p>or via approximation with Monte Carlo draws:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">theta</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1e5</span>, <span class="kw">mean</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">500</span>)
<span class="no">p_approx</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(<span class="no">theta</span>) <span class="kw">&lt;</span> <span class="fl">250</span>)
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Pr(-250 &lt; theta &lt; 250) ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">p_approx</span>, <span class="fl">2</span>)))</pre></body></html></div>
<pre><code>[1] "Pr(-250 &lt; theta &lt; 250) = 0.38"</code></pre>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">d</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="no">theta</span>, <span class="kw">clr</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(<span class="no">theta</span>) <span class="kw">&gt;</span> <span class="fl">250</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">d</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">theta</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="no">clr</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span>(<span class="kw">binwidth</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">show.legend</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">""</span>, <span class="kw">labels</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="kw">expand</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">0</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(<span class="no">theta</span>), <span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">1000</span>, -<span class="fl">250</span>, <span class="fl">250</span>, <span class="fl">1000</span>))</pre></body></html></div>
<div class="figure" style="text-align: center">
<img src="priors_files/figure-html/unnamed-chunk-5-1.png" alt="_There is much more probability mass outside the interval (-250, 250)._" width="60%"><p class="caption">
<em>There is much more probability mass outside the interval (-250, 250).</em>
</p>
</div>
<p><br> This will almost never correspond to the prior beliefs of a researcher about a parameter in a well-specified applied regression model and yet priors like <span class="math inline">\(\theta \sim \mathsf{Normal(\mu = 0, \sigma = 500)}\)</span> (and more extreme) remain quite popular.</p>
<p>Even when you know very little, a flat or very wide prior will almost never be the best approximation to your beliefs about the parameters in your model that you can express using <strong>rstanarm</strong> (or other software). <em>Some</em> amount of prior information will be available. For example, even if there is nothing to suggest a priori that a particular coefficient will be positive or negative, there is almost always enough information to suggest that different orders of magnitude are not equally likely. Making use of this information when setting a prior scale parameter is simple —one heuristic is to set the scale an order of magnitude bigger than you suspect it to be— and has the added benefit of helping to stabilize computations.</p>
<p>A more in-depth discussion of non-informative vs weakly informative priors is available in the case study <a href="http://mc-stan.org/users/documentation/case-studies/weakly_informative_shapes.html"><em>How the Shape of a Weakly Informative Prior Affects Inferences</em></a>.</p>
</div>
<div id="specifying-flat-priors" class="section level3">
<h3 class="hasAnchor">
<a href="#specifying-flat-priors" class="anchor"></a>Specifying flat priors</h3>
<p><strong>rstanarm</strong> will use flat priors if <code>NULL</code> is specified rather than a distribution. For example, to use a flat prior on regression coefficients you would specify <code>prior=NULL</code>:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">flat_prior_test</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/stan_glm.html">stan_glm</a></span>(<span class="no">mpg</span> ~ <span class="no">wt</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mtcars</span>, <span class="kw">prior</span> <span class="kw">=</span> <span class="kw">NULL</span>)</pre></body></html></div>
<pre><code>
SAMPLING FOR MODEL 'continuous' NOW (CHAIN 1).
Chain 1: 
Chain 1: Gradient evaluation took 2.1e-05 seconds
Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.21 seconds.
Chain 1: Adjust your expectations accordingly!
Chain 1: 
Chain 1: 
Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)
Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)
Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)
Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)
Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)
Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)
Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)
Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)
Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)
Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)
Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)
Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)
Chain 1: 
Chain 1:  Elapsed Time: 0.0423 seconds (Warm-up)
Chain 1:                0.040305 seconds (Sampling)
Chain 1:                0.082605 seconds (Total)
Chain 1: 

SAMPLING FOR MODEL 'continuous' NOW (CHAIN 2).
Chain 2: 
Chain 2: Gradient evaluation took 1.4e-05 seconds
Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.14 seconds.
Chain 2: Adjust your expectations accordingly!
Chain 2: 
Chain 2: 
Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)
Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)
Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)
Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)
Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)
Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)
Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)
Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)
Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)
Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)
Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)
Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)
Chain 2: 
Chain 2:  Elapsed Time: 0.036959 seconds (Warm-up)
Chain 2:                0.039121 seconds (Sampling)
Chain 2:                0.07608 seconds (Total)
Chain 2: 

SAMPLING FOR MODEL 'continuous' NOW (CHAIN 3).
Chain 3: 
Chain 3: Gradient evaluation took 1.2e-05 seconds
Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.12 seconds.
Chain 3: Adjust your expectations accordingly!
Chain 3: 
Chain 3: 
Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)
Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)
Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)
Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)
Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)
Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)
Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)
Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)
Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)
Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)
Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)
Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)
Chain 3: 
Chain 3:  Elapsed Time: 0.038547 seconds (Warm-up)
Chain 3:                0.039273 seconds (Sampling)
Chain 3:                0.07782 seconds (Total)
Chain 3: 

SAMPLING FOR MODEL 'continuous' NOW (CHAIN 4).
Chain 4: 
Chain 4: Gradient evaluation took 1.5e-05 seconds
Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.15 seconds.
Chain 4: Adjust your expectations accordingly!
Chain 4: 
Chain 4: 
Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)
Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)
Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)
Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)
Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)
Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)
Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)
Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)
Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)
Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)
Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)
Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)
Chain 4: 
Chain 4:  Elapsed Time: 0.035293 seconds (Warm-up)
Chain 4:                0.02856 seconds (Sampling)
Chain 4:                0.063853 seconds (Total)
Chain 4: </code></pre>
<p>In this case we let <strong>rstanarm</strong> use the default priors for the intercept and error standard deviation (we could change that if we wanted), but the coefficient on the <code>wt</code> variable will have a flat prior. To double check that indeed a flat prior was used for the coefficient on <code>wt</code> we can call <code>prior_summary</code>:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/prior_summary.stanreg.html">prior_summary</a></span>(<span class="no">flat_prior_test</span>)</pre></body></html></div>
<pre><code>Priors for model 'flat_prior_test' 
------
Intercept (after predictors centered)
  Specified prior:
    ~ normal(location = 20, scale = 2.5)
  Adjusted prior:
    ~ normal(location = 20, scale = 15)

Coefficients
 ~ flat

Auxiliary (sigma)
  Specified prior:
    ~ exponential(rate = 1)
  Adjusted prior:
    ~ exponential(rate = 0.17)
------
See help('prior_summary.stanreg') for more details</code></pre>
<p><br></p>
</div>
</div>
<div id="informative-prior-distributions" class="section level1">
<h1 class="hasAnchor">
<a href="#informative-prior-distributions" class="anchor"></a>Informative Prior Distributions</h1>
<p>Although the default priors tend to work well, prudent use of more informative priors is encouraged. For example, suppose we have a linear regression model <span class="math display">\[y_i \sim \mathsf{Normal}\left(\alpha + \beta_1 x_{1,i} + \beta_2 x_{2,i}, \, \sigma\right)\]</span> and we have evidence (perhaps from previous research on the same topic) that approximately <span class="math inline">\(\beta_1 \in (-15, -5)\)</span> and <span class="math inline">\(\beta_2 \in (-1, 1)\)</span>. An example of an informative prior for <span class="math inline">\(\boldsymbol{\beta} = (\beta_1, \beta_2)'\)</span> could be</p>
<p><span class="math display">\[
\boldsymbol{\beta} \sim \mathsf{Normal} \left( 
  \begin{pmatrix} -10 \\ 0 \end{pmatrix},
  \begin{pmatrix} 5^2 &amp; 0 \\ 0 &amp; 2^2 \end{pmatrix}
\right),
\]</span> which sets the prior means at the midpoints of the intervals and then allows for some wiggle room on either side. If the data are highly informative about the parameter values (enough to overwhelm the prior) then this prior will yield similar results to a non-informative prior. But as the amount of data and/or the signal-to-noise ratio decrease, using a more informative prior becomes increasingly important.</p>
<p>If the variables <code>y</code>, <code>x1</code>, and <code>x2</code> are in the data frame <code>dat</code> then this model can be specified as</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">my_prior</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/priors.html">normal</a></span>(<span class="kw">location</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">10</span>, <span class="fl">0</span>), <span class="kw">scale</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5</span>, <span class="fl">2</span>))
<span class="fu"><a href="../reference/stan_glm.html">stan_glm</a></span>(<span class="no">y</span> ~ <span class="no">x1</span> + <span class="no">x2</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">dat</span>, <span class="kw">prior</span> <span class="kw">=</span> <span class="no">my_prior</span>)</pre></body></html></div>
<p>We left the priors for the intercept and error standard deviation at their defaults, but informative priors can be specified for those parameters in an analogous manner.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
